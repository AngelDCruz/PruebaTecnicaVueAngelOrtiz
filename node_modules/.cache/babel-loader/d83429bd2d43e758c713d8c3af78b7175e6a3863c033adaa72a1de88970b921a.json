{"ast":null,"code":"import * as Winwheel from './Winwheel';\nimport prizeModal from './demo/src/prizeModal';\nexport default {\n  components: {\n    prizeModal\n  },\n  props: {\n    btnColor: String,\n    btnText: String,\n    pageTitle: String,\n    wheelSize: null,\n    segments: Array,\n    duration: Number,\n    spin: Number\n  },\n  data() {\n    return {\n      loadingPrize: false,\n      theWheel: null,\n      modalPrize: {},\n      showModal: false,\n      wheelPower: 1,\n      wheelSpinning: false,\n      WinWheelOptions: {\n        textFontSize: 14,\n        outterRadius: 410,\n        innerRadius: 25,\n        lineWidth: 8,\n        animation: {\n          type: 'spinOngoing',\n          duration: 0.5\n        }\n      }\n    };\n  },\n  methods: {\n    getWheelSize() {\n      if (this.wheelSize) {\n        return this.wheelSize;\n      } else {\n        return 400;\n      }\n    },\n    hidePrize() {\n      this.modalPrize = {};\n      this.showModal = true;\n    },\n    startSpin() {\n      if (this.wheelSpinning === false) {\n        this.theWheel.startAnimation();\n        this.wheelSpinning = true;\n        this.theWheel = new Winwheel.Winwheel({\n          ...this.WinWheelOptions,\n          numSegments: this.segments.length,\n          segments: this.segments,\n          animation: {\n            type: 'spinToStop',\n            duration: this.duration,\n            spins: this.spin,\n            callbackFinished: this.onFinishSpin\n          }\n        });\n        this.theWheel.startAnimation();\n        this.wheelSpinning = false;\n      }\n    },\n    resetWheel() {\n      this.showModal = false;\n      this.theWheel = new Winwheel.Winwheel({\n        ...this.WinWheelOptions,\n        numSegments: this.segments.length,\n        segments: this.segments\n      });\n      if (this.wheelSpinning) {\n        this.theWheel.stopAnimation(false); // Stop the animation, false as param so does not call callback function.\n      }\n\n      this.theWheel.rotationAngle = 0; // Re-set the wheel angle to 0 degrees.\n      this.theWheel.draw(); // Call draw to render changes to the wheel.\n      this.wheelSpinning = false; // Reset to false to power buttons and spin can be clicked again.\n    },\n\n    initSpin() {\n      this.loadingPrize = true;\n      this.resetWheel();\n      this.loadingPrize = false;\n    },\n    onFinishSpin() {\n      let prize = this.theWheel.getIndicatedSegment();\n      this.modalPrize = {\n        text: prize.text,\n        desc: prize.desc\n      };\n      this.showModal = true;\n    },\n    getBtnColor() {\n      let style = 'cursor:pointer; background:';\n      if (this.btnColor) {\n        return `${style}${this.btnColor};`;\n      } else {\n        return `${style}#c4376f;`;\n      }\n    },\n    getBtnText() {\n      if (this.btnText) {\n        return this.btnText;\n      } else {\n        return 'SPIN!';\n      }\n    }\n  },\n  computed: {},\n  updated() {},\n  mounted() {\n    this.initSpin();\n  }\n};","map":{"version":3,"names":["Winwheel","prizeModal","components","props","btnColor","String","btnText","pageTitle","wheelSize","segments","Array","duration","Number","spin","data","loadingPrize","theWheel","modalPrize","showModal","wheelPower","wheelSpinning","WinWheelOptions","textFontSize","outterRadius","innerRadius","lineWidth","animation","type","methods","getWheelSize","hidePrize","startSpin","startAnimation","numSegments","length","spins","callbackFinished","onFinishSpin","resetWheel","stopAnimation","rotationAngle","draw","initSpin","prize","getIndicatedSegment","text","desc","getBtnColor","style","getBtnText","computed","updated","mounted"],"sources":["node_modules/vue-winwheel-reversion/vue-winwheel.vue"],"sourcesContent":["<template>\r\n\t<section class=\"vue-winwheel\">\r\n\t\t<div class=\"mobile-container\">\r\n\t\t\t<h1>{{pageTitle}}</h1>\r\n\t\t\t<div class=\"wheel-wrapper\">\r\n\t\t\t\t<div class=\"canvas-wrapper\">\r\n\t\t\t\t\t<canvas id=\"canvas\" :width=\"getWheelSize()\" :height=\"getWheelSize()\">\r\n\t\t\t\t\t\t\t<p style=\"{color: white}\" align=\"center\">\r\n\t\t\t\t\t\t\t\tSorry, your browser doesn't support canvas. Please try Google Chrome.\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</canvas>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"button-wrapper\">\r\n\t\t\t\t\t<a class=\"btn btn-play\" :style=\"getBtnColor()\" @click.prevent=\"startSpin()\" v-if=\"!loadingPrize && !wheelSpinning\">{{getBtnText()}}\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<prizeModal v-if=\"showModal\" @close=\"resetWheel()\" :prizeName=\"modalPrize.text\" :prizeDesc=\"modalPrize.desc\">\r\n\t\t</prizeModal>\r\n\t</section>\r\n</template>\r\n\r\n\r\n<script>\r\n\timport * as Winwheel from './Winwheel'\r\n\timport prizeModal from './demo/src/prizeModal'\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tprizeModal\r\n\t\t},\r\n\t\tprops: {\r\n\t\t\tbtnColor: String,\r\n\t\t\tbtnText: String,\r\n\t\t\tpageTitle: String,\r\n\t\t\twheelSize: null,\r\n\t\t\tsegments: Array,\r\n\t\t\tduration: Number,\r\n\t\t\tspin: Number,\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tloadingPrize: false,\r\n\t\t\t\ttheWheel: null,\r\n\t\t\t\tmodalPrize: {},\r\n\t\t\t\tshowModal: false,\r\n\t\t\t\twheelPower: 1,\r\n\t\t\t\twheelSpinning: false,\r\n\t\t\t\tWinWheelOptions: {\r\n\t\t\t\t\ttextFontSize: 14,\r\n\t\t\t\t\toutterRadius: 410,\r\n\t\t\t\t\tinnerRadius: 25,\r\n\t\t\t\t\tlineWidth: 8,\r\n\t\t\t\t\tanimation: {\r\n\t\t\t\t\t\ttype: 'spinOngoing',\r\n\t\t\t\t\t\tduration: 0.5\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetWheelSize() {\r\n\t\t\t\tif (this.wheelSize) {\r\n\t\t\t\t\treturn this.wheelSize\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 400\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thidePrize() {\r\n\t\t\t\tthis.modalPrize = {}\r\n\t\t\t\tthis.showModal = true\r\n\t\t\t},\r\n\t\t\tstartSpin() {\r\n\t\t\t\tif (this.wheelSpinning === false) {\r\n\t\t\t\t\tthis.theWheel.startAnimation()\r\n\t\t\t\t\tthis.wheelSpinning = true\r\n\t\t\t\t\tthis.theWheel = new Winwheel.Winwheel({\r\n\t\t\t\t\t\t...this.WinWheelOptions,\r\n\t\t\t\t\t\tnumSegments: this.segments.length,\r\n\t\t\t\t\t\tsegments: this.segments,\r\n\t\t\t\t\t\tanimation: {\r\n\t\t\t\t\t\t\ttype: 'spinToStop',\r\n\t\t\t\t\t\t\tduration: this.duration,\r\n\t\t\t\t\t\t\tspins: this.spin,\r\n\t\t\t\t\t\t\tcallbackFinished: this.onFinishSpin\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.theWheel.startAnimation()\r\n\t\t\t\t\tthis.wheelSpinning = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tresetWheel() {\r\n\t\t\t\tthis.showModal = false\r\n\t\t\t\tthis.theWheel = new Winwheel.Winwheel({\r\n\t\t\t\t\t...this.WinWheelOptions,\r\n\t\t\t\t\tnumSegments: this.segments.length,\r\n\t\t\t\t\tsegments: this.segments\r\n\t\t\t\t})\r\n\t\t\t\tif (this.wheelSpinning) {\r\n\t\t\t\t\tthis.theWheel.stopAnimation(false) // Stop the animation, false as param so does not call callback function.\r\n\t\t\t\t}\r\n\t\t\t\tthis.theWheel.rotationAngle = 0 // Re-set the wheel angle to 0 degrees.\r\n\t\t\t\tthis.theWheel.draw() // Call draw to render changes to the wheel.\r\n\t\t\t\tthis.wheelSpinning = false // Reset to false to power buttons and spin can be clicked again.\r\n\t\t\t},\r\n\t\t\tinitSpin() {\r\n\t\t\t\tthis.loadingPrize = true\r\n\t\t\t\tthis.resetWheel()\r\n\t\t\t\tthis.loadingPrize = false\r\n\t\t\t},\r\n\t\t\tonFinishSpin() {\r\n\t\t\t\tlet prize = this.theWheel.getIndicatedSegment()\r\n\t\t\t\tthis.modalPrize = {\r\n\t\t\t\t\ttext: prize.text,\r\n\t\t\t\t\tdesc: prize.desc\r\n\t\t\t\t}\r\n\t\t\t\tthis.showModal = true\r\n\t\t\t},\r\n\t\t\tgetBtnColor() {\r\n\t\t\t\tlet style = 'cursor:pointer; background:'\r\n\t\t\t\tif (this.btnColor) {\r\n\t\t\t\t\treturn `${style}${this.btnColor};`\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn `${style}#c4376f;`\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetBtnText() {\r\n\t\t\t\tif (this.btnText) {\r\n\t\t\t\t\treturn this.btnText\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 'SPIN!'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {},\r\n\t\tupdated() {},\r\n\t\tmounted() {\r\n\t\t\tthis.initSpin()\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.vue-winwheel {\r\n\t\ttext-align: center;\r\n\t\tbackground-image: url('/static/img/obstacle-run/bg-spinner-mobile.svg');\r\n\t\tbackground-size: cover;\r\n\t\tbackground-position: center bottom;\r\n\t\tbackground-repeat: no-repeat;\r\n\t}\r\n\t.vue-winwheel h1 {\r\n\t\tcolor: #b32656;\r\n\t\tfont-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n\t\tfont-size: 36px;\r\n\t\tline-height: 90px;\r\n\t\tletter-spacing: 4px;\r\n\t\tmargin: 0;\r\n\t}\r\n\t.vue-winwheel h2 {\r\n\t\tmargin: 0;\r\n\t}\r\n\t.vue-winwheel #modalSpinwheel.custom-modal .content-wrapper .content {\r\n\t\twidth: calc(100vw - 30px);\r\n\t\tpadding-top: 52px;\r\n\t}\r\n\t.vue-winwheel #modalSpinwheel.custom-modal .content-wrapper .content h2 {\r\n\t\ttext-transform: uppercase;\r\n\t\tcolor: #b32656;\r\n\t\tmargin-bottom: 16px;\r\n\t\tmargin-top: 0;\r\n\t\tfont-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n\t\tfont-size: 18px;\r\n\t\tletter-spacing: 1.1px;\r\n\t\tmargin: 0;\r\n\t}\r\n\t.vue-winwheel #modalSpinwheel.custom-modal .content-wrapper .content p {\r\n\t\tfont-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: black;\r\n\t\ttext-align: center;\r\n\t\tline-height: 25px;\r\n\t}\r\n\t.vue-winwheel #modalSpinwheel.custom-modal .content-wrapper .content p strong {\r\n\t\tfont-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n\t}\r\n\t.vue-winwheel #modalSpinwheel.custom-modal .content-wrapper .content .modal-dismiss {\r\n\t\ttop: 12px;\r\n\t\tright: 12px;\r\n\t}\r\n\t.vue-winwheel #modalSpinwheel.custom-modal .content-wrapper .content .modal-dismiss i.icon_close {\r\n\t\tfont-size: 30px;\r\n\t\tcolor: #da2a52;\r\n\t}\r\n\t.vue-winwheel canvas#canvas {\r\n\t\tposition: relative;\r\n\t}\r\n\t.vue-winwheel .canvas-wrapper {\r\n\t\tposition: relative;\r\n\t}\r\n\t.vue-winwheel .canvas-wrapper:after {\r\n\t\tcontent: '';\r\n\t\tdisplay: block;\r\n\t\twidth: 42px;\r\n\t\tbackground: #c4376f;\r\n\t\theight: 42px;\r\n\t\tposition: absolute;\r\n\t\tleft: calc(50% - 25px);\r\n\t\tmargin: auto;\r\n\t\tborder-radius: 100%;\r\n\t\ttop: calc(50% - 29px);\r\n\t\tborder: 5px solid white;\r\n\t\tbox-sizing: content-box;\r\n\t}\r\n\t.vue-winwheel .canvas-wrapper:before {\r\n\t\tcontent: '';\r\n\t\tdisplay: block;\r\n\t\tbackground: #0f0f0f;\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tmargin: 0 auto;\r\n\t\tborder-radius: 100%;\r\n\t\ttop: 0;\r\n\t}\r\n\t.vue-winwheel .wheel-wrapper {\r\n\t\tposition: relative;\r\n\t}\r\n\t.vue-winwheel .wheel-wrapper:before {\r\n\t\tcontent: '';\r\n\t\twidth: 62px;\r\n\t\theight: 47px;\r\n\t\tposition: absolute;\r\n\t\ttop: -10px;\r\n\t\tleft: calc(50% - 31px);\r\n\t\tright: 0;\r\n\t\tdisplay: block;\r\n\t\tz-index: 99999;\r\n\t\tbackground-image: url('./spinner-marker.svg');\r\n\t\tbackground-repeat: no-repeat;\r\n\t\tbackground-size: contain;\r\n\t\tbackground-position: center;\r\n\t}\r\n\t.vue-winwheel .wheel-wrapper .button-wrapper {\r\n\t\tmargin: 0 auto;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\twidth: 231px;\r\n\t\theight: 118px;\r\n\t}\r\n\t.vue-winwheel .wheel-wrapper .btn.btn-play {\r\n\t\tpadding: 0 58px !important;\r\n\t\theight: 40px;\r\n\t\tline-height: 40px;\r\n\t\tcolor: white;\r\n\t\tfont-weight: bold;\r\n\t\ttext-decoration: none;\r\n\t\tborder-radius: 2px;\r\n\t\tfont-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n\t\tletter-spacing: 2px;\r\n\t}\r\n</style>"],"mappings":"AAyBA,YAAAA,QAAA;AACA,OAAAC,UAAA;AACA;EACAC,UAAA;IACAD;EACA;EACAE,KAAA;IACAC,QAAA,EAAAC,MAAA;IACAC,OAAA,EAAAD,MAAA;IACAE,SAAA,EAAAF,MAAA;IACAG,SAAA;IACAC,QAAA,EAAAC,KAAA;IACAC,QAAA,EAAAC,MAAA;IACAC,IAAA,EAAAD;EACA;EACAE,KAAA;IACA;MACAC,YAAA;MACAC,QAAA;MACAC,UAAA;MACAC,SAAA;MACAC,UAAA;MACAC,aAAA;MACAC,eAAA;QACAC,YAAA;QACAC,YAAA;QACAC,WAAA;QACAC,SAAA;QACAC,SAAA;UACAC,IAAA;UACAhB,QAAA;QACA;MACA;IACA;EACA;EACAiB,OAAA;IACAC,aAAA;MACA,SAAArB,SAAA;QACA,YAAAA,SAAA;MACA;QACA;MACA;IACA;IACAsB,UAAA;MACA,KAAAb,UAAA;MACA,KAAAC,SAAA;IACA;IACAa,UAAA;MACA,SAAAX,aAAA;QACA,KAAAJ,QAAA,CAAAgB,cAAA;QACA,KAAAZ,aAAA;QACA,KAAAJ,QAAA,OAAAhB,QAAA,CAAAA,QAAA;UACA,QAAAqB,eAAA;UACAY,WAAA,OAAAxB,QAAA,CAAAyB,MAAA;UACAzB,QAAA,OAAAA,QAAA;UACAiB,SAAA;YACAC,IAAA;YACAhB,QAAA,OAAAA,QAAA;YACAwB,KAAA,OAAAtB,IAAA;YACAuB,gBAAA,OAAAC;UACA;QACA;QACA,KAAArB,QAAA,CAAAgB,cAAA;QACA,KAAAZ,aAAA;MACA;IACA;IACAkB,WAAA;MACA,KAAApB,SAAA;MACA,KAAAF,QAAA,OAAAhB,QAAA,CAAAA,QAAA;QACA,QAAAqB,eAAA;QACAY,WAAA,OAAAxB,QAAA,CAAAyB,MAAA;QACAzB,QAAA,OAAAA;MACA;MACA,SAAAW,aAAA;QACA,KAAAJ,QAAA,CAAAuB,aAAA;MACA;;MACA,KAAAvB,QAAA,CAAAwB,aAAA;MACA,KAAAxB,QAAA,CAAAyB,IAAA;MACA,KAAArB,aAAA;IACA;;IACAsB,SAAA;MACA,KAAA3B,YAAA;MACA,KAAAuB,UAAA;MACA,KAAAvB,YAAA;IACA;IACAsB,aAAA;MACA,IAAAM,KAAA,QAAA3B,QAAA,CAAA4B,mBAAA;MACA,KAAA3B,UAAA;QACA4B,IAAA,EAAAF,KAAA,CAAAE,IAAA;QACAC,IAAA,EAAAH,KAAA,CAAAG;MACA;MACA,KAAA5B,SAAA;IACA;IACA6B,YAAA;MACA,IAAAC,KAAA;MACA,SAAA5C,QAAA;QACA,UAAA4C,KAAA,QAAA5C,QAAA;MACA;QACA,UAAA4C,KAAA;MACA;IACA;IACAC,WAAA;MACA,SAAA3C,OAAA;QACA,YAAAA,OAAA;MACA;QACA;MACA;IACA;EACA;EACA4C,QAAA;EACAC,QAAA;EACAC,QAAA;IACA,KAAAV,QAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}